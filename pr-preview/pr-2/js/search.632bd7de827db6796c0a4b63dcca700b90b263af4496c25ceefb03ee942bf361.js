(()=>{var l="/zen-book-club/pr-preview/pr-2/en/",m=20;(function(){let s=new FlexSearch.Document({document:{id:"id",index:["title","tags","content","date"],store:["title","summary","date","permalink"]},tokenize:"forward"});function h(e){let t=document.querySelector("template").content,n=document.createDocumentFragment(),c=document.querySelector("[data-search-results]");c.textContent="";for(let r in e){let o=e[r],a=t.cloneNode(!0),u=a.querySelector("a"),y=a.querySelector("time"),q=a.querySelector(".content");u.innerHTML=o.title,u.href=o.permalink,y.innerText=o.date,q.innerHTML=o.summary,n.appendChild(a)}c.appendChild(n)}function i(){let e=document.querySelector("[data-search-text]").value.trim(),t=s.search({query:e,enrich:!0,limit:m}),n={};t.forEach(function(c){c.result.forEach(function(r){n[r.id]=r.doc})}),h(n)}function f(){let e=document.querySelector("[data-search-form]");e.addEventListener("submit",function(t){t.preventDefault(),i()}),e.addEventListener("input",function(){i()}),document.querySelector("[data-search-loading]").classList.add("hidden"),document.querySelector("[data-search-input]").classList.remove("hidden"),document.querySelector("[data-search-loading]").focus()}function p(){let e=l+"searchindex.json";document.querySelector("[data-search-loading]").classList.remove("hidden"),fetch(e).then(function(t){return t.json()}).then(function(t){t.forEach(function(n){s.add(n)})})}p(),f()})();})();
